<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>My Instagram Bot</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,500;1,300;1,700&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="login-root">
      <div class="box-root flex-flex flex-direction--column" style="min-height: 100vh;flex-grow: 1;">
        <div class="loginbackground box-background--white padding-top--64">
        </div>
        <div class="box-root padding-top--24 flex-flex flex-direction--column" style="flex-grow: 1; z-index: 9;">
          <div class="box-root padding-top--48 padding-bottom--24 flex-flex flex-justifyContent--center">
            <h1><a rel="dofollow">My Instagram Bot</a></h1>
          </div>
          <div class="formbg-outer">
            <div class="formbg">
              <div class="formbg-inner padding-horizontal--48">
                <form id="stripe-login">
                  <div class="field padding-bottom--24">
                    <label for="email">Username or Email</label>
                    <input type="text" name="email" id="userName">
                  </div>
                  <div class="field padding-bottom--24">
                    <div class="grid--50-50">
                      <label for="password">Password</label>
                    </div>
                    <input type="password" name="password" id="password">
                  </div>
                                  <div class="field padding-bottom--24">
                    <div class="grid--100">
                      <label for="seachTerm">Search Tags (separated by comma)</label>
                    </div>
                    <input type="text" name="seachTerm" placeholder="lifestyle,fitness,food" id="seachTerm">
                  </div>
                  <div class="padding-bottom--24 flex-flex align-center">
                  </div>
                  <div class="field padding-bottom--24">
                    <input type="submit" name="submit" id="start" value="Start My Instagram Bot">
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
	<script>

    // custom javascript to fetch testcase userData from local file
    getUserData();

    async function getUserData(){
      const data = await fetch('userData.json');
      const userDataJson = await data.json();
      const userNameTestCase = userDataJson.username;
      const passwordTestCase = userDataJson.password
      document.getElementById('userName').value = userNameTestCase;
      document.getElementById('password').value = passwordTestCase;
    }

    // custom javascript to fetch testcase seachtags form local file
    getSearchTerms();

    async function getSearchTerms(){
      const searchTermsdata = await fetch('searchTerms.json');
      const searchTermsJson = await searchTermsdata.json();
      const sneakerSearchTerms = searchTermsJson.searchTerms;
      document.getElementById('seachTerm').value = sneakerSearchTerms;

    }


    // action that gets triggered by clicking on the start button
    document.getElementById('start').addEventListener('click', event => {

          let username = document.getElementById("userName").value;
          let password = document.getElementById("password").value;
          let searchTerm = document.getElementById("seachTerm").value;
          const arrayOfSearchTerms = searchTerm.split(',');

          const UserData = {
            username: username,
            password: password,
            arrayOfSearchTerms: arrayOfSearchTerms
          };

          const options = {
            method: "POST",
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(UserData)
          };

          catchSearchTerm();
          async function catchSearchTerm(){
            const response = await fetch('/api', options);
            const json = await response.json();
            const amountOfActionsDone = json.amountOfActionsDone;
            document.getElementById("amountOfActionsDone").textContent = amountOfActionsDone;
            console.log(json);
          }
       
    });   

  </script>
  </body>
</html>